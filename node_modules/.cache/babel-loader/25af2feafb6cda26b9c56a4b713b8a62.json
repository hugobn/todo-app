{"ast":null,"code":"import _classCallCheck from \"/home/developer/Documents/Udemy/Java/FullStack28Minutes/ReactApps/frontend/todo-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/developer/Documents/Udemy/Java/FullStack28Minutes/ReactApps/frontend/todo-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/developer/Documents/Udemy/Java/FullStack28Minutes/ReactApps/frontend/todo-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/developer/Documents/Udemy/Java/FullStack28Minutes/ReactApps/frontend/todo-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/developer/Documents/Udemy/Java/FullStack28Minutes/ReactApps/frontend/todo-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/developer/Documents/Udemy/Java/FullStack28Minutes/ReactApps/frontend/todo-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/developer/Documents/Udemy/Java/FullStack28Minutes/ReactApps/frontend/todo-app/src/components/todo/TodoComponent.jsx\";\nimport React, { Component } from \"react\";\nimport moment from 'moment';\nimport { Formik, Form, Field, ErrorMessage } from 'formik';\nimport TodoDataService from \"../../api/todo/TodoDataService\";\nimport AuthenticationService from \"./AuthenticationService\";\n\nvar TodoComponent = /*#__PURE__*/function (_Component) {\n  _inherits(TodoComponent, _Component);\n\n  function TodoComponent(props) {\n    var _this;\n\n    _classCallCheck(this, TodoComponent);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(TodoComponent).call(this, props));\n    _this.state = {\n      id: _this.props.params.id,\n      description: '',\n      targetDate: moment(new Date()).format('YYYY-MM-DD')\n    };\n    _this.onSubmit = _this.onSubmit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.validate = _this.validate.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(TodoComponent, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var username = AuthenticationService.getLoggedInUserName();\n      TodoDataService.retrieveTodo(username, this.state.id).then(function (response) {\n        _this2.setState({\n          description: response.data.description,\n          targetDate: moment(response.data.targetDate).format('YYYY-MM-DD')\n        });\n      });\n    }\n  }, {\n    key: \"validate\",\n    value: function validate(values) {\n      var errors = {};\n\n      if (!values.description) {\n        errors.description = 'Enter a description';\n      } else if (values.description.length < 5) {\n        errors.description = 'Enter at least 5 characters in description';\n      }\n\n      if (!moment(values.targetDate).isValid()) {\n        errors.targetDate = 'Enter a valid Target Date';\n      }\n\n      return errors;\n    }\n  }, {\n    key: \"onSubmit\",\n    value: function onSubmit(values) {\n      var _this3 = this;\n\n      var username = AuthenticationService.getLoggedInUserName();\n      TodoDataService.updateTodo(username, this.state.id, {\n        id: this.state.id,\n        description: values.description,\n        targetDate: values.targetDate\n      }).then(function () {\n        return _this3.props.navigate(\"/todos\");\n      });\n      console.log(values);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      var _this$state = this.state,\n          description = _this$state.description,\n          targetDate = _this$state.targetDate; //let targetDate = this.state.targetDate\n\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"h1\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 17\n        }\n      }, \"Todo\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"container\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Formik, {\n        initialValues: {\n          description: description,\n          targetDate: targetDate\n        },\n        onSubmit: this.onSubmit,\n        validate: this.validate,\n        validateOnChange: false,\n        validateOnBlur: false,\n        enableReinitialize: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 21\n        }\n      }, function (props) {\n        return /*#__PURE__*/React.createElement(Form, {\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 33\n          }\n        }, /*#__PURE__*/React.createElement(ErrorMessage, {\n          name: \"description\",\n          component: \"div\",\n          className: \"alert alert-warning\",\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 37\n          }\n        }), /*#__PURE__*/React.createElement(ErrorMessage, {\n          name: \"targetDate\",\n          component: \"div\",\n          className: \"alert alert-warning\",\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 37\n          }\n        }), /*#__PURE__*/React.createElement(\"fieldset\", {\n          className: \"form-group\",\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 37\n          }\n        }, /*#__PURE__*/React.createElement(\"label\", {\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 41\n          }\n        }, \"Description\"), /*#__PURE__*/React.createElement(Field, {\n          className: \"form-control\",\n          type: \"text\",\n          name: \"description\",\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 41\n          }\n        })), /*#__PURE__*/React.createElement(\"fieldset\", {\n          className: \"form-group\",\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 37\n          }\n        }, /*#__PURE__*/React.createElement(\"label\", {\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 41\n          }\n        }, \"Target Date\"), /*#__PURE__*/React.createElement(Field, {\n          className: \"form-control\",\n          type: \"date\",\n          name: \"targetDate\",\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 41\n          }\n        })), /*#__PURE__*/React.createElement(\"button\", {\n          className: \"btn btn-success\",\n          type: \"submmit\",\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 37\n          }\n        }, \"Save\"));\n      })));\n    }\n  }]);\n\n  return TodoComponent;\n}(Component);\n\nexport default TodoComponent;","map":{"version":3,"names":["React","Component","moment","Formik","Form","Field","ErrorMessage","TodoDataService","AuthenticationService","TodoComponent","props","state","id","params","description","targetDate","Date","format","onSubmit","bind","validate","username","getLoggedInUserName","retrieveTodo","then","response","setState","data","values","errors","length","isValid","updateTodo","navigate","console","log"],"sources":["/home/developer/Documents/Udemy/Java/FullStack28Minutes/ReactApps/frontend/todo-app/src/components/todo/TodoComponent.jsx"],"sourcesContent":["import React,{Component} from \"react\";\nimport moment from 'moment'\nimport {Formik, Form, Field, ErrorMessage} from 'formik'\nimport TodoDataService from \"../../api/todo/TodoDataService\";\nimport AuthenticationService from \"./AuthenticationService\";\n\nclass TodoComponent extends Component {\n    constructor(props){\n        super(props)\n        this.state = {\n            id: this.props.params.id,\n            description: '',\n            targetDate: moment(new Date()).format('YYYY-MM-DD'),\n        }\n        this.onSubmit = this.onSubmit.bind(this)\n        this.validate = this.validate.bind(this)\n    }\n\n    componentDidMount(){\n        let username = AuthenticationService.getLoggedInUserName()\n        TodoDataService.retrieveTodo(username, this.state.id)\n        .then(\n            response => {\n                this.setState(\n                    {\n                        description: response.data.description,\n                        targetDate: moment(response.data.targetDate).format('YYYY-MM-DD')\n                    }\n                )\n            }\n        )\n    }\n\n    validate(values){\n        let errors = {}\n        if(!values.description){\n            errors.description = 'Enter a description'\n        }else if(values.description.length<5){\n            errors.description = 'Enter at least 5 characters in description'\n        }\n\n        if(!moment(values.targetDate).isValid()){\n            errors.targetDate = 'Enter a valid Target Date'\n        }\n        return errors\n    }\n\n    onSubmit(values){\n        let username = AuthenticationService.getLoggedInUserName()\n        TodoDataService.updateTodo(username, this.state.id, \n            {\n                id: this.state.id, \n                description: values.description, \n                targetDate: values.targetDate\n            }).then(() => this.props.navigate(`/todos`))\n        console.log(values)\n    }\n\n    render() { \n        let {description, targetDate} = this.state\n        //let targetDate = this.state.targetDate\n        return (\n            <div>\n                <h1>Todo</h1>\n                <div className=\"container\">\n                    <Formik initialValues={{description, targetDate}} onSubmit={this.onSubmit} validate={this.validate} \n                    validateOnChange={false} validateOnBlur={false} enableReinitialize={true}>\n                        {\n                            (props) => (\n                                <Form>\n                                    <ErrorMessage name=\"description\" component=\"div\" className=\"alert alert-warning\"/>\n                                    <ErrorMessage name=\"targetDate\" component=\"div\" className=\"alert alert-warning\"/>\n                                    <fieldset className=\"form-group\">\n                                        <label>Description</label>\n                                        <Field className=\"form-control\" type=\"text\" name=\"description\"/>\n                                    </fieldset>\n                                    <fieldset className=\"form-group\">\n                                        <label>Target Date</label>\n                                        <Field className=\"form-control\" type=\"date\" name=\"targetDate\"/>\n                                    </fieldset>\n                                    <button className=\"btn btn-success\" type=\"submmit\">Save</button>\n                                </Form>\n                            )\n                        }\n                    </Formik>\n                </div>\n            </div>\n        )\n    }\n}\n \nexport default TodoComponent;"],"mappings":"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"},"metadata":{},"sourceType":"module"}